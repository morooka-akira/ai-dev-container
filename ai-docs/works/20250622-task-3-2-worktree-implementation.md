# Task 3-2: workspace startã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè£…

## ä½œæ¥­æ¦‚è¦

Task 3-2ã¨ã—ã¦ã€å®Ÿéš›ã«Git worktreeã‚’ä½œæˆã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

## ç›®çš„

- `ai-workspace start <task-name>`ã§å®Ÿéš›ã«worktreeã‚’ä½œæˆã™ã‚‹
- ä½œæˆã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãŒæ­£ã—ã„ãƒ–ãƒ©ãƒ³ãƒã‚’æŒã¤
- `ai-workspace list`ã§ä½œæˆã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- é©åˆ‡ãªãƒ‘ã‚¹ã¨ãƒ–ãƒ©ãƒ³ãƒåãŒä½¿ç”¨ã•ã‚Œã‚‹

## å®Ÿè£…å¯¾è±¡

### 1. `src/workspace.rs`ã®`create_workspace`é–¢æ•°ã®å®Ÿè£…
- å®Ÿéš›ã®worktreeä½œæˆãƒ­ã‚¸ãƒƒã‚¯
- ãƒ™ãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
- ãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆã¨åˆ‡ã‚Šæ›¿ãˆ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 2. `src/workspace.rs`ã®`list_workspaces`é–¢æ•°ã®å®Ÿè£…
- å®Ÿéš›ã®worktreeä¸€è¦§å–å¾—
- Git worktreeãƒªã‚¹ãƒˆã‹ã‚‰ã®æƒ…å ±æŠ½å‡º
- ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æƒ…å ±ã®æ§‹é€ åŒ–

### 3. ãƒ†ã‚¹ãƒˆã®è¿½åŠ 
- worktreeä½œæˆã®ãƒ†ã‚¹ãƒˆ
- ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ
- ä¸€è¦§å–å¾—ã®ãƒ†ã‚¹ãƒˆ

## è¨­è¨ˆæ¤œè¨

### Git2ã‚¯ãƒ¬ãƒ¼ãƒˆã®ä½¿ç”¨
- `Repository::worktree()`ã§worktreeã®ä½œæˆ
- `Repository::worktrees()`ã§worktreeä¸€è¦§ã®å–å¾—
- `Repository::find_worktree()`ã§å€‹åˆ¥worktreeã®æƒ…å ±å–å¾—

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ–¹é‡
- Gitæ“ä½œã®ã‚¨ãƒ©ãƒ¼ã¯é©åˆ‡ã«ã‚­ãƒ£ãƒƒãƒã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¤‰æ›
- éƒ¨åˆ†çš„ãªå¤±æ•—ãŒã‚ã£ã¦ã‚‚å¯èƒ½ãªé™ã‚Šå‡¦ç†ã‚’ç¶™ç¶š
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã¯è©³ç´°ãªãƒ­ã‚°ã‚’æä¾›

### ãƒ–ãƒ©ãƒ³ãƒå‘½åè¦å‰‡
- `{branch_prefix}{task_name}`å½¢å¼ï¼ˆä¾‹ï¼š`work/feature-x`ï¼‰
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ããƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åï¼ˆä¾‹ï¼š`20250622-143022-feature-x`ï¼‰

## å®Ÿè£…æ‰‹é †

1. ä½œæ¥­ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ âœ…
2. featureãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆ
3. worktreeä½œæˆæ©Ÿèƒ½ã®å®Ÿè£…
4. worktreeä¸€è¦§å–å¾—æ©Ÿèƒ½ã®å®Ÿè£…
5. ãƒ†ã‚¹ãƒˆã®è¿½åŠ 
6. å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆfmt, clippy, testï¼‰
7. ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆæ›´æ–°
8. PRä½œæˆ

## æ³¨æ„äº‹é …

- å®Ÿè£…å‰ã«@ai-docs/designs/design.mdã¨tasks.mdã‚’å‚ç…§
- æ–°æ©Ÿèƒ½ã«ã¯å¿…ãšãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å«ã‚ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚‚ä½œæˆ
- å®Œäº†å¾Œã¯å¿…ãšå“è³ªãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ

## æœŸå¾…ã™ã‚‹çµæœ

```bash
# worktreeä½œæˆã®ãƒ†ã‚¹ãƒˆ
cargo run -- start test-feature

# å‡ºåŠ›ä¾‹ï¼š
# ğŸš€ Creating workspace:
#   Name: 20250622-143022-test-feature
#   Path: ../workspaces/20250622-143022-test-feature
#   Branch: work/test-feature
# âœ… Workspace created successfully!
# ğŸ“ Path: ../workspaces/20250622-143022-test-feature
# ğŸŒ¿ Branch: work/test-feature

# ä¸€è¦§è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
cargo run -- list

# å‡ºåŠ›ä¾‹ï¼š
# ğŸ“‹ ç™ºè¦‹ã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹: 1 ä»¶
#   - work/test-feature -> ../workspaces/20250622-143022-test-feature

# å®Ÿéš›ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç¢ºèª
ls ../workspaces/
cd ../workspaces/20250622-143022-test-feature && git branch
```